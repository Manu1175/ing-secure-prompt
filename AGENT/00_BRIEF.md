# 00_BRIEF — SecurePrompt (Handoff to Codex in VS Code)

## Mission
Build **SecurePrompt**: a Python scrubbing pipeline + FastAPI demo that:
- detects & redacts sensitive entities (IBAN, PAN, email, phone, names, address, account IDs, national IDs, etc.),
- explains each redaction,
- replaces values with deterministic identifiers (`C{level}::{label}::{hash}`),
- supports **C2/C3/C4** policies loaded from manifests,
- can **de-scrub** (full/selective) with **role check + justification**,
- writes an **append-only, hash-chained audit log**,
- processes prompts and files (txt/html/csv/pdf + png via OCR),
- runs evaluations (precision/recall) on a curated golden set.

## Milestones (Europe/Brussels)
- **Milestone 1 (Fri 03 Oct 2025)**: MVP-3 — CLI + FastAPI demo, pdf/png supported, policies, audit, de-scrub; report precision/recall on golden set.
- **Milestone 2 (Fri 10 Oct 2025)**: Pass/Fail — no missed sensitive info for selected scenarios; doc pack (design, tests, performance).

## Ground rules
1) Modify only `/secureprompt` and `/api` (plus `/tools` for ingestion).
2) Every function: docstring + tests. Keep changes small; run tests after each.
3) Never log raw sensitive text. Log identifiers and hashes only.
4) Policies are in `/policy/manifests/*.yml` (generated by the ingest script).

## Today (Day 1)
1) Scaffold repo + CLI command `secureprompt scrub <path>`.
2) Implement detectors for IBAN, PAN (Luhn), email, phone, name; explanations + identifier schema.
3) Implement `audit.append(record)` with hash chain.
4) Create `/tools/ingest_secureprompt_repo.py` and run `make ingest-secureprompt` to normalize `external/SecurePrompt/DATA` and `PROMPTS` into `/data/golden/*.jsonl` and `/data/eval/*.jsonl`, and generate `/policy/manifests/*.yml`.
5) Add tests: ingestion, detectors (positive/negative), hash-chain continuity.

If a spec is ambiguous, propose 2 options and pick one with a reversible design.
